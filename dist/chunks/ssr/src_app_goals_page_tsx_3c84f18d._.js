module.exports=[20630,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(20238),e=a.i(96438),f=a.i(41675),g=a.i(81560);let h=(0,a.i(70106).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var i=a.i(16201),j=a.i(56711),k=a.i(2253),l=a.i(74016);let m=({goal:a,onEdit:c,onDelete:d,onToggleComplete:m,onToggleMilestone:n})=>{let o=new Date(a.targetDate),p=(0,k.differenceInDays)(o,new Date),q=+(0,l.toDate)(o)<Date.now()&&!a.isCompleted,r=a.milestones,s=Array.isArray(r)?r:[],t=s.filter(a=>a.isCompleted).length,u=s.length,v=u>0?Math.round(t/u*100):100*!!a.isCompleted;return(0,b.jsxs)("div",{className:(0,e.cn)("group relative overflow-hidden rounded-3xl border p-6 transition-all duration-300 hover:shadow-xl",a.isCompleted?"border-green-500/30 bg-green-500/5":q?"border-red-500/30 bg-red-500/5":"border-white/10 bg-white/[0.03] hover:border-purple-500/30 hover:bg-white/[0.05]"),children:[(0,b.jsx)("div",{className:"absolute -right-10 -top-10 h-32 w-32 rounded-full bg-purple-500/10 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-3xl shadow-inner",children:a.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:(0,e.cn)("text-lg font-bold tracking-tight",a.isCompleted?"text-green-400":"text-white"),children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(f.Calendar,{className:"h-3 w-3 text-muted-foreground"}),(0,b.jsx)("span",{className:(0,e.cn)("text-xs font-medium",q?"text-red-400":"text-muted-foreground"),children:q?`Overdue by ${Math.abs(p)} days`:0===p?"Due today":`${p} days remaining`})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>m(a.id),className:(0,e.cn)("h-10 w-10 rounded-xl transition-all",a.isCompleted?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"hover:bg-white/10 text-muted-foreground hover:text-white"),children:(0,b.jsx)(i.CheckCircle,{className:"h-5 w-5"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>c(a),className:"h-10 w-10 rounded-xl hover:bg-white/10 text-muted-foreground hover:text-white",children:(0,b.jsx)(h,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>d(a.id),className:"h-10 w-10 rounded-xl hover:bg-red-500/20 text-muted-foreground hover:text-red-400",children:(0,b.jsx)(g.Trash2,{className:"h-4 w-4"})})]})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Progress"}),(0,b.jsxs)("span",{className:"text-xs font-bold text-purple-400",children:[v,"%"]})]}),(0,b.jsx)("div",{className:"h-2 w-full rounded-full bg-white/10 overflow-hidden",children:(0,b.jsx)("div",{className:(0,e.cn)("h-full rounded-full transition-all duration-500",a.isCompleted?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-purple-500 to-pink-500"),style:{width:`${v}%`}})})]}),s.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:["Milestones (",t,"/",u,")"]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[s.slice(0,3).map(c=>(0,b.jsxs)("button",{onClick:()=>n(a.id,c.id),className:(0,e.cn)("flex items-center gap-3 w-full p-2 rounded-xl text-left transition-all",c.isCompleted?"bg-green-500/10 text-green-400":"bg-white/[0.03] text-muted-foreground hover:bg-white/[0.05]"),children:[(0,b.jsx)("div",{className:(0,e.cn)("h-4 w-4 rounded-full border-2 flex items-center justify-center transition-all",c.isCompleted?"border-green-500 bg-green-500":"border-muted-foreground"),children:c.isCompleted&&(0,b.jsx)(i.CheckCircle,{className:"h-3 w-3 text-white"})}),(0,b.jsx)("span",{className:(0,e.cn)("text-sm font-medium",c.isCompleted&&"line-through opacity-60"),children:c.title})]},c.id)),s.length>3&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground pl-2",children:["+",s.length-3," more milestones"]})]})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-white/5",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Target Date"}),(0,b.jsx)("span",{className:"font-medium text-white",children:(0,j.format)(o,"MMM d, yyyy")})]})})]})]})};var n=a.i(48313),o=a.i(94988),p=a.i(50429),q=a.i(15618),r=a.i(33508),s=a.i(49666);let t=({isOpen:a,onClose:d,onSave:g,goalToEdit:h})=>{let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,t]=(0,c.useState)("ðŸŽ¯"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)("");(0,c.useEffect)(()=>{h?(j(h.title||""),l(h.description||""),t(h.icon||"ðŸŽ¯"),v(h.targetDate?h.targetDate.split("T")[0]:""),x(h.milestones||[])):A()},[h,a]);let A=()=>{j(""),l(""),t("ðŸŽ¯"),v(""),x([]),z("")},B=()=>{y.trim()&&(x([...w,{id:(0,s.v4)(),title:y.trim(),isCompleted:!1}]),z(""))};return(0,b.jsx)(n.Modal,{isOpen:a,onClose:d,title:h?"Edit Goal":"Create New Goal",className:"max-w-2xl",children:(0,b.jsxs)("div",{className:"space-y-6 py-2",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"md:w-24 shrink-0",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-2 block",children:"Icon"}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>t(a.target.value),maxLength:2,className:"flex h-14 w-full rounded-2xl border border-white/10 bg-white/5 text-center text-2xl focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all"})]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(o.Input,{label:"Goal Title",placeholder:"What do you want to achieve?",value:i,onChange:a=>j(a.target.value),className:"h-14 bg-white/5 text-lg font-medium border-white/10"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest",children:"Description (Optional)"}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),placeholder:"Why is this goal important to you?",rows:3,className:"w-full rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-white placeholder:text-muted-foreground/30 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all resize-none"})]}),(0,b.jsxs)("div",{className:"p-4 rounded-2xl bg-white/[0.03] border border-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-purple-400",children:[(0,b.jsx)(f.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Target Date"})]}),(0,b.jsx)(o.Input,{type:"date",value:u,onChange:a=>v(a.target.value),className:"bg-black/20 border-white/5"})]}),(0,b.jsxs)("div",{className:"p-4 rounded-2xl bg-white/[0.03] border border-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-purple-400",children:[(0,b.jsx)(p.Target,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Milestones"})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsx)(o.Input,{placeholder:"Add a milestone...",value:y,onChange:a=>z(a.target.value),onKeyDown:a=>"Enter"===a.key&&B(),className:"bg-black/20 border-white/5"}),(0,b.jsx)(e.Button,{onClick:B,disabled:!y.trim(),className:"h-12 w-12 rounded-xl bg-purple-500 hover:bg-purple-600 text-white border-0 shrink-0",children:(0,b.jsx)(q.Plus,{className:"h-5 w-5"})})]}),w.length>0?(0,b.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:w.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 p-3 rounded-xl bg-white/[0.03] border border-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-xs font-bold text-muted-foreground w-6",children:[c+1,"."]}),(0,b.jsx)("span",{className:"text-sm font-medium text-white",children:a.title})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>{var b;return b=a.id,void x(w.filter(a=>a.id!==b))},className:"h-8 w-8 rounded-lg hover:bg-red-500/20 text-muted-foreground hover:text-red-400",children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground/50 text-center py-4 italic",children:"No milestones added yet"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-white/5",children:[(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsx)(e.Button,{variant:"ghost",onClick:d,className:"h-14 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold px-8 border-0",children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:()=>{if(!i.trim()||!u)return;let a={title:i.trim(),description:k.trim(),icon:m,targetDate:new Date(u).toISOString(),milestones:w,linkedTaskIds:h?.linkedTaskIds||[]};h?g({...h,...a}):g(a),d()},disabled:!i.trim()||!u,className:"h-14 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold px-12 border-0 shadow-lg shadow-purple-500/20 hover:scale-105 transition-transform disabled:opacity-50 disabled:hover:scale-100",children:h?"Save Changes":"Create Goal"})]})]})})};var u=a.i(56025),v=a.i(20237),w=a.i(81036),x=a.i(12171);a.i(69387);var y=a.i(60574);function z(){let{user:a}=(0,u.useAuth)(),{confirm:f,ConfirmDialogComponent:g}=(0,x.useConfirm)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[l,n]=(0,c.useState)(void 0),[o,r]=(0,c.useState)(!0);(0,c.useEffect)(()=>{if(!a){i([]),r(!1);return}let b=(0,y.collection)(v.db,"users",a.uid,"goals"),c=(0,y.onSnapshot)(b,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));b.sort((a,b)=>new Date(a.targetDate).getTime()-new Date(b.targetDate).getTime()),i(b),r(!1)});return()=>c()},[a]);let z=async b=>{if(a)try{if("id"in b)await (0,y.updateDoc)((0,y.doc)(v.db,"users",a.uid,"goals",b.id),{...b});else{let c={...b,id:(0,s.v4)(),createdAt:new Date().toISOString(),isCompleted:!1};await (0,y.setDoc)((0,y.doc)(v.db,"users",a.uid,"goals",c.id),c)}}catch(a){(0,w.handleFirestoreError)(a,"Save goal")}},A=async b=>{!a||await f({title:"Delete this goal?",description:"This will permanently delete this goal and all its milestones. This action cannot be undone.",confirmText:"Delete Goal",cancelText:"Cancel",type:"danger"})&&await (0,y.deleteDoc)((0,y.doc)(v.db,"users",a.uid,"goals",b))},B=async b=>{if(!a)return;let c=h.find(a=>a.id===b);c&&await (0,y.updateDoc)((0,y.doc)(v.db,"users",a.uid,"goals",b),{isCompleted:!c.isCompleted})},C=async(b,c)=>{if(!a)return;let d=h.find(a=>a.id===b);if(!d)return;let e=d.milestones.map(a=>a.id===c?{...a,isCompleted:!a.isCompleted}:a);await (0,y.updateDoc)((0,y.doc)(v.db,"users",a.uid,"goals",b),{milestones:e})},D=a=>{n(a),k(!0)},E=()=>{n(void 0),k(!0)},F=h.filter(a=>!a.isCompleted),G=h.filter(a=>a.isCompleted);return(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[(0,b.jsx)(d.Header,{}),(0,b.jsxs)("main",{className:"container mx-auto max-w-4xl px-4 pt-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold tracking-tight text-white flex items-center gap-3",children:[(0,b.jsx)(p.Target,{className:"h-8 w-8 text-purple-400"}),"Goals"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Track your long-term goals and milestones"})]}),(0,b.jsxs)(e.Button,{onClick:E,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold px-6 h-12 rounded-2xl border-0 shadow-lg shadow-purple-500/20 hover:scale-105 transition-transform",children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-5 w-5"}),"New Goal"]})]}),o?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-purple-500 border-t-transparent"})}):0===h.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 rounded-3xl border border-dashed border-white/10 bg-white/[0.02]",children:[(0,b.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 mb-6",children:(0,b.jsx)(p.Target,{className:"h-10 w-10 text-purple-400"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No Goals Yet"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center max-w-sm mb-6",children:"Set your first goal and start tracking your progress towards achieving your dreams."}),(0,b.jsxs)(e.Button,{onClick:E,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold px-6 h-12 rounded-2xl border-0",children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-5 w-5"}),"Create Your First Goal"]})]}):(0,b.jsxs)("div",{className:"space-y-8",children:[F.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mb-4",children:["Active Goals (",F.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:F.map(a=>(0,b.jsx)(m,{goal:a,onEdit:D,onDelete:A,onToggleComplete:B,onToggleMilestone:C},a.id))})]}),G.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mb-4",children:["Completed (",G.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:G.map(a=>(0,b.jsx)(m,{goal:a,onEdit:D,onDelete:A,onToggleComplete:B,onToggleMilestone:C},a.id))})]})]})]}),(0,b.jsx)(t,{isOpen:j,onClose:()=>k(!1),onSave:z,goalToEdit:l}),g]})}a.s(["default",()=>z],20630)}];

//# sourceMappingURL=src_app_goals_page_tsx_3c84f18d._.js.map