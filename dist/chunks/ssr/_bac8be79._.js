module.exports=[54826,(a,b,c)=>{},66531,(a,b,c)=>{a.r(54826);var d=a.r(72131),e=d&&"object"==typeof d&&"default"in d?d:{default:d},f="undefined"!=typeof process&&process.env&&!0,g=function(a){return"[object String]"===Object.prototype.toString.call(a)},h=function(){function a(a){var b=void 0===a?{}:a,c=b.name,d=void 0===c?"stylesheet":c,e=b.optimizeForSpeed,h=void 0===e?f:e;i(g(d),"`name` must be a string"),this._name=d,this._deletedRulePlaceholder="#"+d+"-deleted-rule____{}",i("boolean"==typeof h,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=h,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var b,c=a.prototype;return c.setOptimizeForSpeed=function(a){i("boolean"==typeof a,"`setOptimizeForSpeed` accepts a boolean"),i(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=a,this.inject()},c.isOptimizeForSpeed=function(){return this._optimizeForSpeed},c.inject=function(){var a=this;i(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(b,c){return"number"==typeof c?a._serverSheet.cssRules[c]={cssText:b}:a._serverSheet.cssRules.push({cssText:b}),c},deleteRule:function(b){a._serverSheet.cssRules[b]=null}}},c.getSheetForTag=function(a){if(a.sheet)return a.sheet;for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].ownerNode===a)return document.styleSheets[b]},c.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},c.insertRule=function(a,b){return i(g(a),"`insertRule` accepts only strings"),"number"!=typeof b&&(b=this._serverSheet.cssRules.length),this._serverSheet.insertRule(a,b),this._rulesCount++},c.replaceRule=function(a,b){this._optimizeForSpeed;var c=this._serverSheet;if(b.trim()||(b=this._deletedRulePlaceholder),!c.cssRules[a])return a;c.deleteRule(a);try{c.insertRule(b,a)}catch(d){f||console.warn("StyleSheet: illegal rule: \n\n"+b+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),c.insertRule(this._deletedRulePlaceholder,a)}return a},c.deleteRule=function(a){this._serverSheet.deleteRule(a)},c.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},c.cssRules=function(){return this._serverSheet.cssRules},c.makeStyleTag=function(a,b,c){b&&i(g(b),"makeStyleTag accepts only strings as second parameter");var d=document.createElement("style");this._nonce&&d.setAttribute("nonce",this._nonce),d.type="text/css",d.setAttribute("data-"+a,""),b&&d.appendChild(document.createTextNode(b));var e=document.head||document.getElementsByTagName("head")[0];return c?e.insertBefore(d,c):e.appendChild(d),d},b=[{key:"length",get:function(){return this._rulesCount}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}();function i(a,b){if(!a)throw Error("StyleSheet: "+b+".")}var j=function(a){for(var b=5381,c=a.length;c;)b=33*b^a.charCodeAt(--c);return b>>>0},k={};function l(a,b){if(!b)return"jsx-"+a;var c=String(b),d=a+c;return k[d]||(k[d]="jsx-"+j(a+"-"+c)),k[d]}function m(a,b){var c=a+(b=b.replace(/\/style/gi,"\\/style"));return k[c]||(k[c]=b.replace(/__jsx-style-dynamic-selector/g,a)),k[c]}var n=function(){function a(a){var b=void 0===a?{}:a,c=b.styleSheet,d=void 0===c?null:c,e=b.optimizeForSpeed,f=void 0!==e&&e;this._sheet=d||new h({name:"styled-jsx",optimizeForSpeed:f}),this._sheet.inject(),d&&"boolean"==typeof f&&(this._sheet.setOptimizeForSpeed(f),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var b=a.prototype;return b.add=function(a){var b=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(a.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var c=this.getIdAndRules(a),d=c.styleId,e=c.rules;if(d in this._instancesCounts){this._instancesCounts[d]+=1;return}var f=e.map(function(a){return b._sheet.insertRule(a)}).filter(function(a){return -1!==a});this._indices[d]=f,this._instancesCounts[d]=1},b.remove=function(a){var b=this,c=this.getIdAndRules(a).styleId;if(function(a,b){if(!a)throw Error("StyleSheetRegistry: "+b+".")}(c in this._instancesCounts,"styleId: `"+c+"` not found"),this._instancesCounts[c]-=1,this._instancesCounts[c]<1){var d=this._fromServer&&this._fromServer[c];d?(d.parentNode.removeChild(d),delete this._fromServer[c]):(this._indices[c].forEach(function(a){return b._sheet.deleteRule(a)}),delete this._indices[c]),delete this._instancesCounts[c]}},b.update=function(a,b){this.add(b),this.remove(a)},b.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},b.cssRules=function(){var a=this,b=this._fromServer?Object.keys(this._fromServer).map(function(b){return[b,a._fromServer[b]]}):[],c=this._sheet.cssRules();return b.concat(Object.keys(this._indices).map(function(b){return[b,a._indices[b].map(function(a){return c[a].cssText}).join(a._optimizeForSpeed?"":"\n")]}).filter(function(a){return!!a[1]}))},b.styles=function(a){var b,c;return b=this.cssRules(),void 0===(c=a)&&(c={}),b.map(function(a){var b=a[0],d=a[1];return e.default.createElement("style",{id:"__"+b,key:"__"+b,nonce:c.nonce?c.nonce:void 0,dangerouslySetInnerHTML:{__html:d}})})},b.getIdAndRules=function(a){var b=a.children,c=a.dynamic,d=a.id;if(c){var e=l(d,c);return{styleId:e,rules:Array.isArray(b)?b.map(function(a){return m(e,a)}):[m(e,b)]}}return{styleId:l(d),rules:Array.isArray(b)?b:[b]}},b.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(a,b){return a[b.id.slice(2)]=b,a},{})},a}(),o=d.createContext(null);function p(){return new n}function q(){return d.useContext(o)}function r(a){var b=q();return b&&b.add(a),null}o.displayName="StyleSheetContext",e.default.useInsertionEffect||e.default.useLayoutEffect,r.dynamic=function(a){return a.map(function(a){return l(a[0],a[1])}).join(" ")},c.StyleRegistry=function(a){var b=a.registry,c=a.children,f=d.useContext(o),g=d.useState(function(){return f||b||p()})[0];return e.default.createElement(o.Provider,{value:g},c)},c.createStyleRegistry=p,c.style=r,c.useStyleRegistry=q},31626,(a,b,c)=>{b.exports=a.r(66531).style},40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(96438),f=a.i(94988),g=a.i(70106);let h=(0,g.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var i=a.i(43108),j=a.i(14753),k=a.i(8406),l=a.i(83077);let m=(0,g.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var n=a.i(33441);let o=({icon:a,title:c,description:d,color:e})=>(0,b.jsxs)("div",{className:"group relative overflow-hidden rounded-3xl border border-border bg-card/50 p-8 transition-all hover:bg-card hover:shadow-2xl hover:shadow-purple-500/10",children:[(0,b.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e} opacity-0 transition-opacity group-hover:opacity-5`}),(0,b.jsx)("div",{className:"mb-6 inline-flex h-14 w-14 items-center justify-center rounded-2xl bg-muted transition-transform group-hover:scale-110",children:(0,b.jsx)(a,{className:"h-7 w-7 text-foreground"})}),(0,b.jsx)("h3",{className:"mb-3 text-xl font-bold text-foreground",children:c}),(0,b.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:d})]}),p=({number:a,title:c,description:d})=>(0,b.jsxs)("div",{className:"relative flex flex-col items-center text-center p-6",children:[(0,b.jsx)("div",{className:"mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-pink-500 text-2xl font-bold text-white shadow-lg shadow-purple-500/30",children:a}),(0,b.jsx)("h3",{className:"mb-3 text-xl font-bold text-foreground",children:c}),(0,b.jsx)("p",{className:"text-muted-foreground leading-relaxed max-w-xs",children:d})]}),q=()=>{let{login:a,register:g,loginWithGoogle:q,user:r}=(0,d.useAuth)(),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),C=async b=>{if(b.preventDefault(),z(""),B(!0),!s||!u){z("Please fill in all fields"),B(!1);return}try{w?await g(s,u):await a(s,u)}catch(a){switch(console.error(a),a.code){case"auth/email-already-in-use":z("This username is already taken. Try another.");break;case"auth/invalid-email":z("Invalid characters in username.");break;case"auth/weak-password":z("Password should be at least 6 characters.");break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":z("Invalid username or password.");break;default:z(a.message||"An unexpected error occurred.")}}finally{B(!1)}},D=async()=>{z(""),B(!0);try{await q()}catch(a){console.error(a),"auth/popup-closed-by-user"===a.code?z("Sign in was cancelled."):z(a.message||"Failed to sign in with Google.")}finally{B(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background text-foreground overflow-x-hidden",children:[(0,b.jsxs)("section",{className:"relative flex min-h-screen flex-col items-center justify-center px-4 py-20 lg:py-32",children:[(0,b.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-purple-600/10 blur-[120px] rounded-full pointer-events-none"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"}),(0,b.jsxs)("div",{className:"container relative z-10 grid grid-cols-1 gap-12 lg:grid-cols-2 lg:gap-24 items-center",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center text-center lg:items-start lg:text-left space-y-8",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-purple-500/10 px-4 py-2 text-sm font-bold text-purple-600 dark:text-purple-300 border border-purple-500/20",children:[(0,b.jsx)(k.Sparkles,{className:"w-4 h-4 fill-purple-500"}),(0,b.jsx)("span",{children:"AI-Powered Routine Tracker"})]}),(0,b.jsxs)("h1",{className:"text-5xl md:text-7xl font-bold tracking-tighter bg-clip-text text-transparent bg-gradient-to-br from-foreground to-foreground/60",children:["Master Your ",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-purple-500",children:"Daily Flow"})]}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground max-w-xl leading-relaxed",children:"Build rock-solid habits, track your progress, and achieve your goals with our intelligent focus engine and analytics."}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[(0,b.jsxs)(e.Button,{className:"h-14 px-8 rounded-2xl bg-foreground text-background font-bold text-lg hover:opacity-90 transition-opacity",children:["Get Started ",(0,b.jsx)(m,{className:"ml-2 w-5 h-5"})]}),(0,b.jsx)(e.Button,{variant:"ghost",className:"h-14 px-8 rounded-2xl font-bold text-lg border border-border hover:bg-muted",children:"Learn More"})]}),(0,b.jsxs)("div",{className:"pt-8 flex items-center gap-8 text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Check,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{children:"Free to start"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Check,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{children:"Focus Engine"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Check,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{children:"AI Insights"})]})]})]}),(0,b.jsx)("div",{className:"w-full max-w-md mx-auto lg:ml-auto space-y-8",children:(0,b.jsxs)("div",{className:"rounded-3xl p-8 shadow-2xl bg-card/80 backdrop-blur-xl border border-border/50 ring-1 ring-border/50",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:w?"Create your account":"Welcome back"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:w?"Start your journey to better habits today.":"Enter your details to access your dashboard."})]}),(0,b.jsxs)(e.Button,{type:"button",onClick:D,disabled:A,className:"w-full h-12 bg-background hover:bg-muted text-foreground font-semibold rounded-xl mb-6 flex items-center justify-center gap-3 transition-all border border-border",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,b.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,b.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,b.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("div",{className:"w-full border-t border-border"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,b.jsx)("span",{className:"bg-card px-3 text-muted-foreground font-medium",children:"Or continue with email"})})]}),(0,b.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[(0,b.jsx)(f.Input,{label:"Username",type:"text",required:!0,placeholder:"Username",value:s,onChange:a=>t(a.target.value),leftIcon:(0,b.jsx)(h,{className:"w-4 h-4"}),className:"bg-muted/50 border-border"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(f.Input,{label:"Password",type:"password",required:!0,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:u,onChange:a=>v(a.target.value),leftIcon:(0,b.jsx)(i.Lock,{className:"w-4 h-4"}),className:"bg-muted/50 border-border"}),w&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-1",children:"Must be at least 6 characters"})]}),y&&(0,b.jsx)("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-sm text-red-600 dark:text-red-400",children:y}),(0,b.jsx)(e.Button,{type:"submit",disabled:A,className:"w-full h-12 bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 transition-all font-bold rounded-xl text-white shadow-lg shadow-purple-500/20",children:A?"Processing...":w?"Create Account":"Sign In"})]}),(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[w?"Already have an account? ":"New to Routine Tracker? ",(0,b.jsx)("button",{type:"button",onClick:()=>x(!w),className:"font-bold text-purple-500 hover:text-purple-400 transition-colors",children:w?"Sign In":"Sign Up Free"})]})})]})})]})]}),(0,b.jsx)("section",{className:"py-24 bg-muted/30 border-y border-border",children:(0,b.jsxs)("div",{className:"container mx-auto px-4",children:[(0,b.jsxs)("div",{className:"text-center mb-16 max-w-3xl mx-auto",children:[(0,b.jsxs)("h2",{className:"text-3xl md:text-5xl font-bold mb-6 tracking-tight",children:["Everything you need to ",(0,b.jsx)("span",{className:"text-purple-500",children:"excel"})]}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:"Our comprehensive suite of tools helps you manage time, track habits, and stay motivated every single day."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,b.jsx)(o,{icon:j.Timer,title:"Focus Engine",description:"Immersive timer with ambient sounds to help you enter deep work states effortlessly.",color:"from-blue-500/20 to-cyan-500/20"}),(0,b.jsx)(o,{icon:l.Trophy,title:"Gamified Leaderboard",description:"Compete with friends and the global community. Earn streaks, badges, and rewards.",color:"from-yellow-500/20 to-orange-500/20"}),(0,b.jsx)(o,{icon:k.Sparkles,title:"AI Assistant",description:"Smart insights about your productivity patterns and personalized routine suggestions.",color:"from-purple-500/20 to-pink-500/20"})]})]})}),(0,b.jsx)("section",{className:"py-24 bg-background",children:(0,b.jsxs)("div",{className:"container mx-auto px-4",children:[(0,b.jsxs)("div",{className:"text-center mb-16",children:[(0,b.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"How it works"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Three simple steps to a better you."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 relative",children:[(0,b.jsx)("div",{className:"hidden md:block absolute top-14 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-purple-500/0 via-purple-500/20 to-purple-500/0"}),(0,b.jsx)(p,{number:"1",title:"Create Routines",description:"Set up your daily habits and organize them into time blocks like Morning, Afternoon, and Night."}),(0,b.jsx)(p,{number:"2",title:"Track & Focus",description:"Use the Focus Engine to execute tasks without distractions and mark them as complete."}),(0,b.jsx)(p,{number:"3",title:"Analyze Growth",description:"View detailed analytics, maintain your streak, and climb the leaderboard."})]})]})}),(0,b.jsx)("footer",{className:"py-12 border-t border-border bg-muted/20",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:"RT"}),(0,b.jsx)("span",{className:"text-xl font-bold",children:"Routine Tracker"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-8 text-center max-w-sm mx-auto",children:"Designed to help you build consistency and achieve your full potential."}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground/60 font-medium uppercase tracking-widest",children:"Â© 2026 Routine Tracker. All rights reserved."})]})})]})};var r=a.i(20238),s=a.i(31626),t=a.i(56711),u=a.i(35058),v=a.i(15618),w=a.i(87654),x=a.i(41675),y=a.i(90669),z=a.i(41710),A=a.i(1027),B=a.i(12171);let C=["Small steps every day lead to big changes.","Consistency beats intensity. Keep showing up.","Your future self will thank you for this.","Progress, not perfection.","Every task completed is a victory.","Build the life you want, one routine at a time.","Discipline is choosing what you want most over what you want now.","The secret of getting ahead is getting started."],D=({onAddTask:a})=>{var f,g,h;let i,{dailyProgress:j,completedTasksToday:m,totalTasksToday:n,todayDate:o,resetDay:p,tasks:q}=(0,u.useTask)(),{user:r}=(0,d.useAuth)(),{confirm:D,ConfirmDialogComponent:E}=(0,B.useConfirm)(),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(0),[J,K]=(0,c.useState)(0),L=2*Math.PI*42;(0,c.useEffect)(()=>{let a=setTimeout(()=>{K(j)},100);return()=>clearTimeout(a)},[j]),(0,c.useEffect)(()=>{if(100===j&&n>0){G(!0);let a=setTimeout(()=>G(!1),3e3);return()=>clearTimeout(a)}},[j,n]),(0,c.useEffect)(()=>{let a=setInterval(()=>{I(a=>(a+1)%C.length)},1e4);return()=>clearInterval(a)},[]);let M=(f=new Date().getHours(),g=j,i=(h=r?.displayName||void 0)?`, ${h.split(" ")[0]}`:"",100===g?{title:`Champion Mode! ðŸ†`,subtitle:`You've conquered today${i}! Time to celebrate your wins.`}:f>=5&&f<12?{title:`Rise & Shine${i}! â˜€ï¸`,subtitle:"Fresh start, fresh opportunities. Let's make today count!"}:f>=12&&f<17?{title:`Keep Pushing${i}! ðŸ’ª`,subtitle:"Afternoon hustle mode activated. You're doing great!"}:f>=17&&f<21?{title:`Almost There${i}! ðŸŒ…`,subtitle:"Evening wind-down approaching. Finish strong!"}:{title:`Night Owl${i}! ðŸŒ™`,subtitle:"Burning the midnight oil? Rest is productive too."}),N=(0,c.useMemo)(()=>{let a=new Date,b=(0,t.format)(a,"HH:mm"),c=(0,t.format)(a,"EEE").toUpperCase();return q.filter(a=>a.days.includes(c)&&a.startTime>b).sort((a,b)=>a.startTime.localeCompare(b.startTime))[0]||null},[q]),O=(0,c.useMemo)(()=>{if(!N)return null;let a=new Date,[b,c]=N.startTime.split(":").map(Number),d=new Date;d.setHours(b,c,0,0);let e=d.getTime()-a.getTime();if(e<=0)return null;let f=Math.floor(e/6e4);if(f<60)return`${f}m`;let g=Math.floor(f/60);return`${g}h ${f%60}m`},[N]);return(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 relative w-full overflow-hidden rounded-[2rem] sm:rounded-[3rem] bg-gradient-to-br from-purple-600 via-purple-500 to-pink-500 p-6 sm:p-8 lg:p-10 text-white shadow-[0_20px_50px_rgba(168,85,247,0.3)] mb-6 sm:mb-10 transition-transform duration-500 hover:scale-[1.005]",children:[F&&(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 absolute inset-0 pointer-events-none z-20 overflow-hidden",children:[...Array(30)].map((a,c)=>(0,b.jsx)("div",{style:{left:`${100*Math.random()}%`,top:"-10%",animationDelay:`${2*Math.random()}s`,animationDuration:`${2+2*Math.random()}s`},className:"jsx-4fe4f9b1918927c0 absolute animate-confetti",children:["ðŸŽ‰","âœ¨","ðŸŒŸ","ðŸ’«","ðŸ†","â­"][Math.floor(6*Math.random())]},c))}),(0,b.jsx)("div",{style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"},className:"jsx-4fe4f9b1918927c0 absolute inset-0 opacity-20"}),(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((a,c)=>(0,b.jsx)("div",{style:{left:`${15+15*c}%`,top:`${20+c%3*25}%`,animationDelay:`${.5*c}s`,animationDuration:`${3+c}s`},className:"jsx-4fe4f9b1918927c0 absolute w-2 h-2 bg-white/30 rounded-full animate-float"},c))}),(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 absolute top-0 right-0 w-48 sm:w-72 lg:w-96 h-48 sm:h-72 lg:h-96 bg-white/10 blur-[80px] sm:blur-[100px] rounded-full -mr-10 sm:-mr-20 -mt-10 sm:-mt-20 pointer-events-none animate-pulse-slow"}),(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 absolute bottom-0 left-0 w-32 sm:w-48 lg:w-64 h-32 sm:h-48 lg:h-64 bg-black/20 blur-[60px] sm:blur-[80px] rounded-full -ml-10 sm:-ml-20 -mb-10 sm:-mb-20 pointer-events-none"}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 relative z-10 flex flex-col lg:flex-row lg:items-center justify-between gap-6 sm:gap-8 lg:gap-10",children:[(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 space-y-4 sm:space-y-6 flex-1",children:[(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-center gap-3 bg-white/10 backdrop-blur-md w-fit px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl sm:rounded-2xl border border-white/10",children:[(0,b.jsx)(x.Calendar,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white/90"}),(0,b.jsx)("span",{className:"jsx-4fe4f9b1918927c0 text-[10px] sm:text-xs font-bold tracking-[0.1em] uppercase",children:(0,t.format)(o,"EEE, MMM d, yyyy")})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 space-y-1 sm:space-y-2",children:[(0,b.jsx)("h2",{className:"jsx-4fe4f9b1918927c0 text-3xl sm:text-5xl lg:text-6xl font-black tracking-tighter leading-none",children:M.title}),(0,b.jsx)("p",{className:"jsx-4fe4f9b1918927c0 text-white/70 font-medium text-sm sm:text-base lg:text-lg max-w-md",children:M.subtitle})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-start gap-2 bg-white/5 backdrop-blur-sm rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-white/10 max-w-md",children:[(0,b.jsx)(k.Sparkles,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-300 shrink-0 mt-0.5"}),(0,b.jsxs)("p",{className:"jsx-4fe4f9b1918927c0 text-xs sm:text-sm text-white/80 italic leading-relaxed transition-opacity duration-500",children:['"',C[H],'"']})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex flex-wrap gap-3 sm:gap-4 pt-1 sm:pt-2",children:[(0,b.jsxs)(e.Button,{onClick:a,className:"bg-white text-purple-600 hover:bg-white/90 font-black px-5 sm:px-8 h-11 sm:h-14 rounded-xl sm:rounded-2xl border-0 shadow-2xl transition-all active:scale-95 text-sm sm:text-base",children:[(0,b.jsx)(v.Plus,{className:"mr-1.5 sm:mr-2 h-5 w-5 sm:h-6 sm:w-6"})," Create Task"]}),(0,b.jsxs)(e.Button,{variant:"ghost",onClick:async()=>{await D({title:"Reset all tasks for today?",description:"This will uncheck all completed tasks for today. This action cannot be undone.",confirmText:"Reset Today",cancelText:"Cancel",type:"warning"})&&p()},className:"bg-white/10 hover:bg-white/20 text-white font-bold border border-white/20 h-11 sm:h-14 rounded-xl sm:rounded-2xl px-4 sm:px-6 backdrop-blur-sm text-sm sm:text-base",children:[(0,b.jsx)(w.RotateCcw,{className:"mr-1.5 sm:mr-2 h-4 w-4 sm:h-5 sm:w-5"})," Reset Today"]})]})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex flex-col sm:flex-row lg:flex-col xl:flex-row items-stretch sm:items-center gap-4 sm:gap-6 lg:gap-8 bg-black/20 backdrop-blur-2xl p-5 sm:p-6 lg:p-8 rounded-[1.5rem] sm:rounded-[2rem] lg:rounded-[2.5rem] border border-white/10 shadow-inner",children:[(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 relative flex items-center justify-center mx-auto sm:mx-0",children:[(0,b.jsx)("div",{className:`jsx-4fe4f9b1918927c0 absolute inset-0 bg-white/10 rounded-full blur-xl transition-opacity duration-1000 ${j>50?"opacity-100 animate-pulse-slow":"opacity-0"}`}),(0,b.jsxs)("svg",{className:"jsx-4fe4f9b1918927c0 h-24 w-24 sm:h-28 sm:w-28 lg:h-32 lg:w-32 -rotate-90 transform",children:[(0,b.jsx)("circle",{strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:42,cx:"50%",cy:"50%",className:"jsx-4fe4f9b1918927c0 text-white/10"}),(0,b.jsx)("circle",{strokeWidth:"8",strokeDasharray:L,strokeDashoffset:L-J/100*L,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:42,cx:"50%",cy:"50%",style:{filter:"drop-shadow(0 0 12px rgba(255,255,255,0.6))"},className:"jsx-4fe4f9b1918927c0 text-white transition-all duration-[2000ms] ease-out"})]}),(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 absolute inset-0 flex flex-col items-center justify-center",children:(0,b.jsxs)("span",{className:"jsx-4fe4f9b1918927c0 text-2xl sm:text-3xl font-black",children:[Math.round(J),"%"]})})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex flex-col gap-3 sm:gap-4 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 space-y-1",children:[(0,b.jsx)("p",{className:"jsx-4fe4f9b1918927c0 text-[9px] sm:text-[10px] font-black uppercase tracking-[0.2em] text-white/50",children:"Completion"}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-end gap-1.5 sm:gap-2",children:[(0,b.jsx)("span",{className:"jsx-4fe4f9b1918927c0 text-3xl sm:text-4xl lg:text-5xl font-black tabular-nums",children:m}),(0,b.jsxs)("span",{className:"jsx-4fe4f9b1918927c0 text-lg sm:text-xl lg:text-2xl font-bold text-white/30 mb-0.5 sm:mb-1",children:["/ ",n]})]})]}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-center gap-2 group",children:[(0,b.jsx)("div",{className:`jsx-4fe4f9b1918927c0 flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full transition-all ${100===j&&n>0?"bg-yellow-500/20 text-yellow-400 animate-pulse":"bg-green-500/20 text-green-400"} group-hover:scale-110`,children:100===j&&n>0?(0,b.jsx)(l.Trophy,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}):(0,b.jsx)(y.Activity,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})}),(0,b.jsx)("span",{className:`jsx-4fe4f9b1918927c0 text-[9px] sm:text-[10px] font-bold uppercase tracking-widest ${100===j&&n>0?"text-yellow-400":"text-green-400"}`,children:m===n&&n>0?"Perfect Day!":"In Progress"})]}),N&&(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-center gap-2 bg-white/5 rounded-xl sm:rounded-2xl p-2.5 sm:p-3 border border-white/10 mt-1",children:[(0,b.jsx)("div",{className:"jsx-4fe4f9b1918927c0 flex h-8 w-8 sm:h-9 sm:w-9 items-center justify-center rounded-xl bg-white/10 text-base sm:text-lg shrink-0",children:N.icon}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"jsx-4fe4f9b1918927c0 text-[10px] sm:text-xs font-bold text-white truncate",children:N.title}),(0,b.jsxs)("div",{className:"jsx-4fe4f9b1918927c0 flex items-center gap-1 text-white/50",children:[(0,b.jsx)(z.Clock,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),(0,b.jsxs)("span",{className:"jsx-4fe4f9b1918927c0 text-[9px] sm:text-[10px] font-semibold",children:[N.startTime," â€¢ in ",O]})]})]}),(0,b.jsx)(A.Zap,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-yellow-400 shrink-0"})]})]})]})]}),(0,b.jsx)(s.default,{id:"4fe4f9b1918927c0",children:"@keyframes float{0%,to{opacity:.3;transform:translateY(0)rotate(0)}50%{opacity:.6;transform:translateY(-20px)rotate(180deg)}}@keyframes confetti{0%{opacity:1;transform:translateY(0)rotate(0)}to{opacity:0;transform:translateY(100vh)rotate(720deg)}}@keyframes pulse-slow{0%,to{opacity:.6}50%{opacity:1}}.animate-float.jsx-4fe4f9b1918927c0{animation:4s ease-in-out infinite float}.animate-confetti.jsx-4fe4f9b1918927c0{animation:3s ease-out forwards confetti}.animate-pulse-slow.jsx-4fe4f9b1918927c0{animation:3s ease-in-out infinite pulse-slow}"}),E]})};var E=a.i(98621),F=a.i(74614);function G(...a){return(0,F.twMerge)((0,E.clsx)(a))}let H=["MON","TUE","WED","THU","FRI","SAT","SUN"],I=()=>{let{selectedDay:a,setSelectedDay:c,tasks:d}=(0,u.useTask)(),e=(0,t.format)(new Date,"EEE").toUpperCase();return(0,b.jsx)("div",{className:"w-full overflow-x-auto pb-10 pt-4 scrollbar-hide px-1",children:(0,b.jsx)("div",{className:"flex min-w-max space-x-4",children:H.map(f=>{let g=a===f,h=e===f,i=(a=>{let b,c,e,f=d.filter(b=>b.days.includes(a));if(0===f.length)return 0;let g=(c=(b=new Date).getDay(),(e=new Date(b)).setDate(b.getDate()+((({SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6})[a]??1)-c)),(0,t.format)(e,"yyyy-MM-dd"));return Math.round(f.filter(a=>a.completionHistory?.includes(g)).length/f.length*100)})(f);return(0,b.jsxs)("button",{onClick:()=>c(f),className:G("group relative flex flex-col items-center justify-center rounded-[2.5rem] transition-all duration-300","h-32 w-28",g?"bg-primary text-primary-foreground shadow-lg shadow-primary/20 scale-105 z-10 border-0":"bg-card text-muted-foreground hover:bg-muted hover:scale-102 border border-border"),children:[h&&(0,b.jsx)("div",{className:G("absolute top-4 h-1.5 w-1.5 rounded-full animate-pulse",g?"bg-primary-foreground":"bg-primary")}),(0,b.jsx)("span",{className:G("text-[10px] font-bold tracking-[0.2em] mb-3 transition-colors uppercase",g?"text-primary-foreground/80":"text-muted-foreground/60 group-hover:text-foreground/60"),children:f}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsxs)("span",{className:G("text-2xl font-bold tracking-tighter",g?"text-primary-foreground":"text-foreground"),children:[i,"%"]}),(0,b.jsx)("div",{className:G("mt-3 h-1 w-12 rounded-full transition-all overflow-hidden",g?"bg-primary-foreground/30":"bg-muted"),children:(0,b.jsx)("div",{className:G("h-full transition-all duration-1000",g?"bg-primary-foreground":"bg-primary"),style:{width:`${i}%`}})})]})]},f)})})})};var J=a.i(23312),K=a.i(50522);function L(...a){return(0,F.twMerge)((0,E.clsx)(a))}let M=({task:a,onEdit:c})=>{let{toggleTaskCompletion:d}=(0,u.useTask)();return(0,b.jsxs)("div",{onClick:()=>c(a),className:L("group relative flex cursor-pointer items-center rounded-3xl border p-4 transition-all duration-300",a.isCompleted?"bg-muted/30 border-border opacity-60 grayscale":"bg-card border-border hover:border-primary/20 hover:shadow-lg active:scale-[0.99]"),children:[!a.isCompleted&&(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-3xl pointer-events-none"}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),d(a.id)},className:L("mr-4 flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl border-2 transition-all duration-300 relative z-20",a.isCompleted?"bg-gradient-to-br from-purple-500 to-pink-500 border-0 shadow-md shadow-purple-500/20 scale-100":"border-border bg-muted/50 group-hover:border-primary/50 group-hover:bg-background"),children:a.isCompleted?(0,b.jsx)(n.Check,{className:"h-5 w-5 text-white stroke-[3] animate-in zoom-in duration-300"}):(0,b.jsx)(n.Check,{className:"h-5 w-5 text-transparent stroke-[3] group-hover:text-primary/20"})}),(0,b.jsx)("div",{className:L("mr-4 flex h-14 w-14 shrink-0 items-center justify-center rounded-[1.25rem] text-3xl shadow-sm transition-all group-hover:scale-105 group-hover:rotate-2",a.isCompleted?"bg-muted text-muted-foreground":"bg-muted/50 text-foreground"),children:(0,b.jsx)("span",{className:"filter drop-shadow-sm",children:a.icon||"ðŸ“"})}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden pointer-events-none relative z-10",children:[(0,b.jsx)("h3",{className:L("truncate text-lg font-bold tracking-tight transition-all",a.isCompleted?"text-muted-foreground line-through decoration-border":"text-foreground"),children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-muted-foreground uppercase tracking-widest bg-muted px-2 py-1 rounded-md",children:[(0,b.jsx)(z.Clock,{className:"w-3 h-3 text-primary"}),a.startTime]}),a.reminder&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-primary font-bold uppercase tracking-widest bg-primary/10 px-2 py-1 rounded-md",children:[(0,b.jsx)(J.Bell,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.reminder})]})]})]}),(0,b.jsx)(K.ChevronRight,{className:"w-5 h-5 text-muted-foreground/30 group-hover:text-foreground/50 transition-colors ml-2"})]})},N=(0,g.default)("sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);var O=a.i(65341);let P=(0,g.default)("sun-medium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]),Q=(0,g.default)("sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);var R=a.i(70880);let S=(0,g.default)("cloud-sun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]),T=({block:a,timeRange:c,onEditTask:d,...e})=>{let{getTasksByTimeBlock:f}=(0,u.useTask)(),g=f(a),h=g.filter(a=>a.isCompleted).length,i=g.length>0?h/g.length*100:0;return(0,b.jsxs)("div",{className:`group flex flex-col h-full rounded-[2.5rem] bg-card border ${{Dawn:"from-orange-500/10 to-pink-500/5 text-orange-500 border-orange-500/20",Morning:"from-yellow-500/10 to-orange-500/5 text-yellow-500 border-yellow-500/20",Noon:"from-blue-500/10 to-cyan-500/5 text-blue-500 border-blue-500/20",Afternoon:"from-sky-500/10 to-indigo-500/5 text-sky-500 border-sky-500/20",Evening:"from-purple-500/10 to-pink-500/5 text-purple-500 border-purple-500/20",Night:"from-indigo-500/10 to-blue-900/5 text-indigo-500 border-indigo-500/20"}[a]} p-8 transition-all duration-300 hover:shadow-lg shadow-sm overflow-hidden relative`,...e,children:[(0,b.jsx)("div",{className:"absolute bottom-0 left-0 h-1 bg-muted w-full transition-all duration-1000",style:{background:`linear-gradient(to right, currentColor ${i}%, transparent ${i}%)`}}),(0,b.jsxs)("div",{className:"mb-8 flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-5",children:[(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-muted border border-border shadow-sm transition-transform group-hover:scale-105",children:(()=>{switch(a){case"Dawn":return(0,b.jsx)(N,{className:"w-6 h-6"});case"Morning":return(0,b.jsx)(S,{className:"w-6 h-6"});case"Noon":return(0,b.jsx)(O.Sun,{className:"w-6 h-6"});case"Afternoon":return(0,b.jsx)(P,{className:"w-6 h-6"});case"Evening":return(0,b.jsx)(Q,{className:"w-6 h-6"});case"Night":return(0,b.jsx)(R.Moon,{className:"w-6 h-6"});default:return null}})()}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-foreground tracking-tight",children:a}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-bold text-muted-foreground uppercase tracking-widest bg-muted px-3 py-1 rounded-full w-fit",children:[(0,b.jsx)(z.Clock,{className:"w-3 h-3 opacity-60"}),c]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsxs)("span",{className:"text-2xl font-bold text-foreground",children:[h,(0,b.jsxs)("span",{className:"text-sm text-muted-foreground/60 font-bold",children:["/",g.length]})]}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest opacity-60",children:"Rituals"})]})]}),(0,b.jsx)("div",{className:"flex-1 space-y-4",children:g.length>0?g.map(a=>(0,b.jsx)(M,{task:a,onEdit:d},a.id)):(0,b.jsxs)("div",{className:"h-full min-h-[140px] flex flex-col items-center justify-center rounded-[2rem] border border-dashed border-border bg-muted/30 p-6 text-center group-hover:border-primary/30 transition-colors",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center mb-3",children:(0,b.jsx)(N,{className:"w-5 h-5 opacity-30"})}),(0,b.jsx)("p",{className:"text-xs font-bold text-muted-foreground/50 uppercase tracking-widest",children:"No activities scheduled"})]})})]})};var U=a.i(62880),V=a.i(46271),W=a.i(62036);a.i(69387);var X=a.i(60574),Y=a.i(20237);let Z=[{title:"Welcome to RT!",description:"Let's take a quick tour to help you build your perfect routine.",position:"center"},{title:"Your Daily Flow",description:"These 6 time blocks are your canvas. Fill them with habits to structure your day.",position:"center"},{title:"Add a Task",description:"Click here to add your first habit or routine. You can set days, times, and icons.",targetId:"add-task-trigger",position:"bottom"},{title:"Stay Focused",description:"Use the Focus page to enter deep work mode with ambient sounds and a timer.",position:"center"}],$="1.0.0",_=()=>{let[a,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(0),{user:i}=(0,d.useAuth)();(0,c.useEffect)(()=>{(async()=>{if(i)try{let a=localStorage.getItem("rt_tour_data"),b=!0;if(a){let{version:c,hasSeen:d}=JSON.parse(a);d&&c===$&&(b=!1)}if(b){let a=(0,X.collection)(Y.db,"tasks"),c=(0,X.query)(a,(0,X.where)("userId","==",i.uid),(0,X.limit)(1));if(!(await (0,X.getDocs)(c)).empty){let a=localStorage.getItem("rt_tour_data");if(a){let{version:c}=JSON.parse(a);c===$&&(b=!1)}else localStorage.setItem("rt_tour_data",JSON.stringify({version:$,hasSeen:!0})),b=!1}}if(b){let a=setTimeout(()=>f(!0),1500);return()=>clearTimeout(a)}}catch(a){console.error("Error checking tour status:",a)}})()},[i]);let j=()=>{f(!1);try{localStorage.setItem("rt_tour_data",JSON.stringify({version:$,hasSeen:!0,skippedAt:new Date().toISOString()}))}catch(a){console.error("Error saving tour skip:",a)}};if(!a)return null;let k=Z[g];return(0,b.jsx)(W.AnimatePresence,{children:(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,b.jsx)(V.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:j}),(0,b.jsxs)(V.motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md overflow-hidden rounded-[2rem] bg-card p-8 shadow-2xl border border-border",children:[(0,b.jsx)("div",{className:"flex gap-2 mb-6 justify-center",children:Z.map((a,c)=>(0,b.jsx)("div",{className:`h-1.5 rounded-full transition-all duration-300 ${c===g?"w-8 bg-purple-500":"w-1.5 bg-muted-foreground/20"}`},c))}),(0,b.jsxs)("div",{className:"text-center space-y-4 mb-8",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-foreground tracking-tight",children:k.title}),(0,b.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:k.description})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.Button,{variant:"ghost",onClick:j,className:"flex-1 h-12 rounded-xl text-muted-foreground hover:bg-muted font-medium",children:"Skip"}),(0,b.jsx)(e.Button,{onClick:()=>{g<Z.length-1?h(a=>a+1):(()=>{f(!1);try{localStorage.setItem("rt_tour_data",JSON.stringify({version:$,hasSeen:!0,completedAt:new Date().toISOString()}))}catch(a){console.error("Error saving tour completion:",a)}})()},className:"flex-[2] h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg shadow-purple-500/20",children:g===Z.length-1?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:["Get Started ",(0,b.jsx)(n.Check,{className:"w-4 h-4"})]}):(0,b.jsxs)("span",{className:"flex items-center gap-2",children:["Next ",(0,b.jsx)(K.ChevronRight,{className:"w-4 h-4"})]})})]})]})]})})};let aa=function(){return(0,b.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:z-[100] focus:p-4 focus:bg-primary focus:text-primary-foreground focus:font-bold focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-lg left-4 top-4",children:"Skip to main content"})},ab=function({message:a,type:d="polite",clearAfter:e=1e3}){let f=(0,c.useRef)(null),[g,h]=(0,c.useState)(a);return(0,c.useEffect)(()=>{if(a&&a!==g&&(h(a),e>0)){let a=setTimeout(()=>{h("")},e);return()=>clearTimeout(a)}},[a,e,g]),(0,b.jsx)("div",{ref:f,role:"status","aria-live":d,"aria-atomic":"true",className:"sr-only",children:g})},ac=function(){let[a,b]=(0,c.useState)((void 0)??!1);return(0,c.useEffect)(()=>{},[null]),a};var ad=a.i(12216),ae=a.i(54062),af=a.i(23292);let ag={4:["critical","emergency","urgent","asap","immediately","priority 1","p1","life or death"],3:["high priority","important","priority high","urgent","soon","priority 3","p3"],2:["medium priority","normal","regular","priority 2","p2"],1:["low priority","sometime","when possible","eventually","priority 1","p1","not urgent"]},ah={work:["work","job","office","project","meeting","deadline","client"],personal:["personal","home","family","errand","chore"],health:["health","exercise","gym","workout","doctor","medicine","wellness"],finance:["money","bill","payment","bank","budget","invoice","financial"],learning:["study","learn","read","course","practice","training","education"],social:["call","meet","friend","family","birthday","dinner","party"],creative:["write","create","design","art","music","paint","draw"]},ai=[/\b(every day|daily|everyday)\b/gi,/\b(every week|weekly)\b/gi,/\b(every month|monthly)\b/gi,/\b(every weekday|mon-fri|workdays?)\b/gi,/\b(every weekend|weekends?)\b/gi,/\b(every monday|tuesday|wednesday|thursday|friday|saturday|sunday)\b/gi];function aj(a){var b,c;let d,e=[],f=a,g=function(a){let b=a.match(/(\d{1,2}):(\d{2})\s*(am|pm)/i);if(b){let a=parseInt(b[1]),c=b[2],d=b[3].toLowerCase();return"pm"===d&&a<12&&(a+=12),"am"===d&&12===a&&(a=0),{value:b[0],time:`${a.toString().padStart(2,"0")}:${c}`,confidence:.95,index:b.index||0,pattern:b[0]}}let c=a.match(/(\d{1,2}):(\d{2})/);if(c&&23>=parseInt(c[1]))return{value:c[0],time:c[0],confidence:.9,index:c.index||0,pattern:c[0]};if(/\bnoon\b/i.test(a)){let b=a.match(/\bnoon\b/i);return{value:"12:00 PM",time:"12:00",confidence:.95,index:b?.index||0,pattern:"noon"}}if(/\bmidnight\b/i.test(a)){let b=a.match(/\bmidnight\b/i);return{value:"12:00 AM",time:"00:00",confidence:.95,index:b?.index||0,pattern:"midnight"}}return null}(a);g&&(e.push({type:"time",value:g.value,confidence:g.confidence,startIndex:g.index,endIndex:g.index+g.value.length}),f=f.replace(g.pattern,"").trim());let h=function(a){let b=new Date,c=null,d="",e=.9,f=0,g=a.match(/\btoday\b/i);g&&(c=b.toISOString().split("T")[0],d="today",f=g.index||0);let h=a.match(/\btomorrow\b/i);h&&(c=new Date(b.getTime()+864e5).toISOString().split("T")[0],d="tomorrow",f=h.index||0);let i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(let g=0;g<i.length;g++){let h=a.match(RegExp(`\\b${i[g]}\\b`,"i"));if(h){let a=g-b.getDay();a<=0&&(a+=7),c=new Date(b.getTime()+24*a*36e5).toISOString().split("T")[0],d=i[g],f=h.index||0,e=.85;break}}let j=a.match(/in\s+(\d+)\s+days?/i);if(j&&!c){let a=parseInt(j[1]);c=new Date(b.getTime()+24*a*36e5).toISOString().split("T")[0],d=j[0],f=j.index||0,e=.8}return c?{value:d,date:c,confidence:e,index:f,pattern:d}:null}(a);h&&(e.push({type:"date",value:h.value,confidence:h.confidence,startIndex:h.index,endIndex:h.index+h.value.length}),f=f.replace(h.pattern,"").trim());let i=function(a){let b=a.match(/(\d+)\s*(min|mins|minute|minutes)\b/i);if(b){let a=parseInt(b[1]);return{value:b[0],duration:60*a,confidence:.95,index:b.index||0,pattern:b[0]}}let c=a.match(/(\d+)\s*(hour|hours|hr|hrs)\b/i);if(c){let a=parseInt(c[1]);return{value:c[0],duration:3600*a,confidence:.95,index:c.index||0,pattern:c[0]}}return null}(a);i&&(e.push({type:"duration",value:i.value,confidence:i.confidence,startIndex:i.index,endIndex:i.index+i.value.length}),f=f.replace(i.pattern,"").trim());let j=(b=a,ai.some(a=>a.test(b))),k=function(a){let b=a.toLowerCase();for(let[a,c]of Object.entries(ag))if(c.some(a=>b.includes(a)))return parseInt(a);return 2}(a),l=function(a){let b=a.toLowerCase();for(let[a,c]of Object.entries(ah))if(c.some(a=>b.includes(a)))return a;return null}(a);(d=f.replace(/^(create|add|new|make|schedule|complete|delete|update|set|start|stop)\s+(a\s+)?(new\s+)?/i,"").replace(/(for me|please|thanks?|thank you|would you|could you)\b/gi,"").replace(/\s+/g," ").trim()).length>0&&(d=d.charAt(0).toUpperCase()+d.slice(1)),f=d;let m=((c=a).toLowerCase(),/create|add|new|make|schedule|set up/i.test(c))?"create":/update|change|modify|edit|reschedule/i.test(c)?"update":/delete|remove|cancel|drop|eliminate/i.test(c)?"delete":/complete|done|finished|check off|mark done|accomplish/i.test(c)?"complete":/when|what's due|what do i have|show me/i.test(c)?"query":/remind|alarm|notify|alert/i.test(c)?"remind":/routine|habit|daily|weekly|every day/i.test(c)?"routine":/focus|timer|pomodoro|concentrate/i.test(c)?"focus":/help|how|tell me|explain|what is/i.test(c)?"chat":"unknown";return{raw:a,name:f,date:h?.date||null,time:g?.time||null,priority:k,category:l,isRecurring:j,duration:i?.duration||null,intent:m,entities:e}}var ak=a.i(77532),al=a.i(38101),am=a.i(49666);function an({onTaskCreated:a,placeholder:d="What needs to be done? (e.g., 'Meeting tomorrow at 2pm')",autoFocus:e=!1,showAnalysis:f=!0,className:g=""}){var h;let i,[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)({show:!1,parsed:null,analysis:{intent:"",priority:"",timing:"",category:""}}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),r=(0,c.useRef)(null),s=(0,c.useRef)(null),{addTask:t,tasks:v}=(0,u.useTask)(),{}=(0,ak.useUI)(),{toggleTimer:w,setSession:x,isActive:y}=(0,al.useFocusTimer)(),z=(0,c.useCallback)((a,b)=>{switch(b){case"success":af.toast.success(a);break;case"error":af.toast.error(a);break;case"warning":af.toast.warning(a);break;default:af.toast.info(a)}},[]),A=(0,c.useCallback)(a=>{var b;let c;if(!a.trim())return void m(a=>({...a,show:!1,parsed:null}));let d=aj(a);m({show:!0,parsed:d,analysis:{intent:d.intent.charAt(0).toUpperCase()+d.intent.slice(1),priority:["","Low","Medium","High","Critical"][d.priority]||"Medium",timing:(c=[],(b=d).date&&c.push(ao(b.date)),b.time&&c.push(ap(b.time)),c.join(" ")||"No timing set"),category:d.category||"General"}})},[]),B=(0,c.useCallback)(a=>{let b=a.target.value;k(b),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{A(b)},150)},[A]);(0,c.useEffect)(()=>{e&&r.current&&r.current.focus()},[e]),(0,c.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[]);let C=(0,c.useCallback)(async a=>{if(a.preventDefault(),j.trim()){o(!0);try{let a=aj(j);switch(a.intent){case"focus":await E(a);break;case"query":F(a);break;default:await D(a)}k(""),m({show:!1,parsed:null,analysis:{intent:"",priority:"",timing:"",category:""}})}catch(a){console.error("Error creating task:",a),af.toast.error("Failed to create task. Please try again.")}finally{o(!1)}}},[j]),D=async b=>{var c;let d={title:b.name,icon:"ðŸ“‹",startTime:b.time||"09:00",endTime:b.time?`${parseInt(b.time.split(":")[0])+1}:00`:"10:00",timeBlock:(c=b.time?parseInt(b.time.split(":")[0]):9)>=5&&c<8?"Dawn":c>=8&&c<12?"Morning":c>=12&&c<14?"Noon":c>=14&&c<17?"Afternoon":c>=17&&c<20?"Evening":"Night",days:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],specificDate:b.date||void 0,reminder:b.time||void 0,createdAt:new Date().toISOString()};await t(d),z(`Created task: ${b.name}`,"success"),a?.({...d,id:(0,am.v4)()})},E=async a=>{let b=a.name.match(/(\d+)/),c=parseInt(a.duration?String(Math.round(a.duration/60)):b?b[1]:"25",10)||25,d=a.name.replace(/focus|timer|pomodoro|start|begin/i,"").replace(/for\s+\d+\s*(min|minute|hour)s?/i,"").trim();d||(d="General focus session"),x("focus"),w(),z(`Starting ${c} minute focus session`,"success")},F=a=>{let b=v.length,c=v.filter(a=>a.isCompleted).length,d=`You have ${b-c} tasks pending`;c>0&&(d+=` (${c} completed)`),z(d,"info")},G=(0,c.useCallback)(a=>{switch(a){case"today":k("Task for today at ");break;case"tomorrow":k("Task for tomorrow at ");break;case"weekly":k("Weekly routine: ");break;case"focus":k("Focus timer for 25 minutes ")}r.current?.focus()},[]);return(0,b.jsx)("div",{className:`smart-task-input ${g}`,children:(0,b.jsxs)("form",{onSubmit:C,className:"relative",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("textarea",{ref:r,value:j,onChange:B,placeholder:d,className:"w-full px-4 py-3 pr-24 text-sm bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none min-h-[52px] max-h-[120px]",rows:1,onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),C(a))}}),(0,b.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!p),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",title:"Quick actions",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,b.jsx)("button",{type:"submit",disabled:!j.trim()||n,className:`p-2 rounded-lg transition-all ${j.trim()&&!n?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"Create task (Enter)",children:n?(0,b.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),p&&(0,b.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 p-2 bg-white border border-gray-200 rounded-xl shadow-lg z-50",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 px-2 py-1 mb-1",children:"Quick actions"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>G("today"),className:"px-3 py-1.5 text-xs bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:"+ Today"}),(0,b.jsx)("button",{type:"button",onClick:()=>G("tomorrow"),className:"px-3 py-1.5 text-xs bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100 transition-colors",children:"+ Tomorrow"}),(0,b.jsx)("button",{type:"button",onClick:()=>G("weekly"),className:"px-3 py-1.5 text-xs bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors",children:"+ Weekly"}),(0,b.jsx)("button",{type:"button",onClick:()=>G("focus"),className:"px-3 py-1.5 text-xs bg-orange-50 text-orange-600 rounded-lg hover:bg-orange-100 transition-colors",children:"+ Focus"})]})]}),f&&l.show&&l.parsed&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-100 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:l.parsed.name||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"Waiting for task name..."})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${{create:"bg-green-100 text-green-700",update:"bg-blue-100 text-blue-700",delete:"bg-red-100 text-red-700",complete:"bg-emerald-100 text-emerald-700",focus:"bg-orange-100 text-orange-700",query:"bg-purple-100 text-purple-700",schedule:"bg-indigo-100 text-indigo-700",routine:"bg-teal-100 text-teal-700"}[l.parsed.intent]||"bg-gray-100 text-gray-600"}`,children:l.analysis.intent}),(0,b.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(h=l.parsed.priority,(i=["","bg-gray-100 text-gray-600","bg-yellow-100 text-yellow-700","bg-orange-100 text-orange-700","bg-red-100 text-red-700"])[h]||i[2])}`,children:l.analysis.priority}),l.parsed.date&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:ao(l.parsed.date)}),l.parsed.time&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:ap(l.parsed.time)}),l.parsed.isRecurring&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Recurring"}),l.parsed.category&&"General"!==l.parsed.category&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:l.analysis.category})]}),l.parsed.duration&&(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Duration: ",Math.round(l.parsed.duration/60)," minutes"]})]}),!j&&(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400",children:[(0,b.jsx)("span",{children:"Enter to create"}),(0,b.jsx)("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),(0,b.jsx)("span",{children:"Shift+Enter for new line"}),(0,b.jsx)("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),(0,b.jsx)("span",{children:"@ for quick actions"})]})]})})}function ao(a){if(!a)return"";try{let b=new Date(a),c=new Date,d=new Date(c.getTime()+864e5);if(a===c.toISOString().split("T")[0])return"Today";if(a===d.toISOString().split("T")[0])return"Tomorrow";return b.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}catch{return a}}function ap(a){if(!a)return"";try{let[b,c]=a.split(":").map(Number),d=new Date;return d.setHours(b,c),d.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}catch{return a}}let aq=.5,ar={start:6,end:12},as={start:12,end:17},at={start:17,end:22},au="agent_habit_patterns",av="agent_task_history",aw="agent_user_facts";class ax{key;constructor(a){this.key=a}save(a){}load(){return[]}clear(){}}class ay{patterns=new Map;constructor(){this.loadPatterns()}loadPatterns(){new ax(au).load().forEach(a=>this.patterns.set(a.id,a))}savePatterns(){let a=Array.from(this.patterns.values());new ax(au).save(a)}detectPatterns(a){let b=[],c={};return a.forEach(a=>{let b=a.category||"uncategorized";c[b]||(c[b]=[]),c[b].push(a)}),Object.entries(c).forEach(([a,c])=>{if(c.length<3)return;let d=this.analyzeTimeDistribution(c),e=this.determineFrequency(c),f=this.calculateConsistency(c);if(f>=aq){let g={id:`pattern-${a}-${Date.now()}`,name:`${a} routine`,frequency:e,trigger:"scheduled",action:a,successRate:f,streak:this.calculateCurrentStreak(c),bestStreak:this.calculateBestStreak(c),lastCompleted:c[0]?.completedAt||null,averageDuration:this.calculateAverageDuration(c),timeDistribution:d},h=Array.from(this.patterns.values()).find(a=>a.name===g.name&&a.frequency===g.frequency);h?(h.successRate=(h.successRate+f)/2,h.streak=g.streak,h.lastCompleted=g.lastCompleted,h.timeDistribution=g.timeDistribution,this.patterns.set(h.id,h)):(this.patterns.set(g.id,g),b.push(g))}}),this.savePatterns(),b}analyzeTimeDistribution(a){let b={};return a.forEach(a=>{let c=new Date(a.completedAt).getHours();b[c]=(b[c]||0)+1}),Object.entries(b).map(([a,b])=>({hour:parseInt(a),count:b})).sort((a,b)=>b.count-a.count)}determineFrequency(a){if(a.length<2)return"daily";let b=(a[a.length-1].completedAt-a[0].completedAt)/864e5/(a.length-1);return b<1.5?"daily":b<8?"weekly":"monthly"}calculateConsistency(a){if(a.length<2)return .5;let b={};a.forEach(a=>{let c=new Date(a.completedAt).toISOString().split("T")[0];b[c]=(b[c]||0)+1});let c=Object.keys(b).length,d=a.length;return 0===c?0:Math.min(1,d/(2*c))}calculateCurrentStreak(a){if(0===a.length)return 0;let b=[...a].sort((a,b)=>b.completedAt-a.completedAt),c=0,d=new Date().toISOString().split("T")[0];for(let a of b){let b=new Date(a.completedAt).toISOString().split("T")[0],e=new Date(b);if(Math.floor((new Date(d).getTime()-e.getTime())/864e5)<=c+1)c++,d=b;else break}return c}calculateBestStreak(a){return this.calculateCurrentStreak(a)}calculateAverageDuration(a){let b=a.reduce((a,b)=>a+b.duration,0);return a.length>0?b/a.length:0}getPatterns(){return Array.from(this.patterns.values())}getPattern(a){return this.patterns.get(a)}}class az{calculateProductivityScore(a){let b=new Date,c=a.filter(a=>{if(!a.completedAt)return!1;let c=new Date(b.getTime()-6048e5);return a.completedAt>c.getTime()});a.filter(a=>{if(!a.completedAt)return!1;let c=new Date(b.getTime()-2592e6);return a.completedAt>c.getTime()});let d=this.analyzeTimeOfDayDistribution(c),e=this.calculateTimeBlockScore(d,ar),f=this.calculateTimeBlockScore(d,as),g=this.calculateTimeBlockScore(d,at),h=a.filter(a=>a.createdAt>b.getTime()-6048e5).length,i=Math.min(100,Math.round(100*(h>0?c.length/h:.5)*1.2)),j=a.filter(a=>(a.duration||0)>0&&a.completedAt);return{overall:Math.round(i),morningScore:Math.round(e),afternoonScore:Math.round(f),eveningScore:Math.round(g),focusScore:Math.round(c.length>0?Math.min(100,Math.round(j.length/c.length*100)):50),consistencyScore:Math.round(this.calculateConsistencyScore(a)),calculatedAt:Date.now()}}analyzeTimeOfDayDistribution(a){let b=new Map;return a.forEach(a=>{if(a.completedAt){let c=new Date(a.completedAt).getHours();b.set(c,(b.get(c)||0)+1)}}),b}calculateTimeBlockScore(a,b){let c=0,d=0;return a.forEach((a,e)=>{d+=a,e>=b.start&&e<b.end&&(c+=a)}),d>0?c/d*100:33}calculateConsistencyScore(a){let b=new Date,c=[];for(let d=0;d<30;d++){let e=new Date(b.getTime()-24*d*36e5);e.setHours(0,0,0,0);let f=new Date(e.getTime()+864e5),g=a.filter(a=>a.completedAt&&a.completedAt>=e.getTime()&&a.completedAt<f.getTime());c.push(+(g.length>0))}return c.filter(a=>1===a).length/30*100}}class aA{patternDetector;productivityAnalyzer;constructor(){this.patternDetector=new ay,this.productivityAnalyzer=new az}generateInsights(a,b,c){let d=[];return b.filter(a=>a.streak>=3).forEach(a=>{d.push({id:`insight-streak-${a.id}`,type:"streak",title:`${a.name} streak!`,description:`You've maintained your ${a.name} for ${a.streak} consecutive periods. Keep it up!`,confidence:.95,actionable:!1,relatedTasks:[],generatedAt:Date.now()})}),c.morningScore>50&&d.push({id:"insight-morning-peak",type:"consistency",title:"Morning productivity peak detected",description:`You complete ${c.morningScore}% of your tasks before noon. This is your peak performance time.`,confidence:.85,actionable:!0,action:"schedule_important_tasks_morning",relatedTasks:[],generatedAt:Date.now()}),c.afternoonScore>50&&d.push({id:"insight-afternoon-peak",type:"consistency",title:"Afternoon productivity peak detected",description:`You complete ${c.afternoonScore}% of your tasks in the afternoon. Good time for focused work.`,confidence:.85,actionable:!0,action:"schedule_important_tasks_afternoon",relatedTasks:[],generatedAt:Date.now()}),c.focusScore<50&&d.push({id:"insight-focus-low",type:"optimization",title:"Increase focus time",description:"Only a small portion of your tasks include duration tracking. Adding time estimates can help improve focus.",confidence:.75,actionable:!0,action:"enable_focus_tracking",relatedTasks:[],generatedAt:Date.now()}),c.consistencyScore>70&&d.push({id:"insight-consistency-high",type:"streak",title:"Excellent consistency!",description:`You've been productive on ${c.consistencyScore}% of days this month. This is a strong habit!`,confidence:.9,actionable:!1,relatedTasks:[],generatedAt:Date.now()}),d}}class aB{generateSuggestions(a,b,c){let d=[],e=Date.now();if(b.morningScore>b.afternoonScore&&b.morningScore>40&&d.push({id:`sug-time-morning-${e}`,type:"time_optimization",title:"Schedule important tasks in the morning",description:"Your productivity data shows you're most effective before noon. Consider blocking this time for high-priority work.",priority:8,actionData:{preferredTime:"morning",priority:"high"},dismissed:!1,generatedAt:e}),b.afternoonScore>b.morningScore&&b.afternoonScore>40&&d.push({id:`sug-time-afternoon-${e}`,type:"time_optimization",title:"Afternoon is your peak time",description:"You seem to be most productive in the afternoon. Plan your important tasks for this window.",priority:8,actionData:{preferredTime:"afternoon",priority:"high"},dismissed:!1,generatedAt:e}),c.some(a=>a.streak>=3)){let a=Math.max(...c.map(a=>a.streak)),b=c.find(b=>b.streak===a);d.push({id:`sug-streak-${e}`,type:"streak_motivation",title:`Keep your ${b?.name||"habit"} streak going!`,description:`You have a ${a}-day streak! Small consistent actions lead to big results.`,priority:7,actionData:{patternId:b?.id},dismissed:!1,generatedAt:e})}b.focusScore>60&&d.push({id:`sug-break-${e}`,type:"break_reminder",title:"Time for a break?",description:"You've been consistently focused lately. Consider taking a short break to maintain your energy.",priority:5,actionData:{breakDuration:5},expiresAt:e+72e5,dismissed:!1,generatedAt:e});let f=c.filter(a=>a.successRate>=.4&&a.successRate<.7);if(f.length>0){let a=f[0];d.push({id:`sug-habit-${e}`,type:"habit_formation",title:`Turn "${a.name}" into a routine`,description:"You've been doing this consistently. Creating a routine can help make it a lasting habit.",priority:7,actionData:{pattern:a},dismissed:!1,generatedAt:e})}return d.push({id:`sug-goal-${e}`,type:"goal_alignment",title:"Align tasks with your goals",description:"Review your daily tasks to ensure they're moving you toward your bigger goals.",priority:6,actionData:{action:"review_goals"},dismissed:!1,generatedAt:e}),d.sort((a,b)=>b.priority-a.priority)}}let aC=new class{patternDetector;productivityAnalyzer;insightGenerator;suggestionEngine;constructor(){this.patternDetector=new ay,this.productivityAnalyzer=new az,this.insightGenerator=new aA,this.suggestionEngine=new aB}analyze(a){let b=a.map(a=>({id:a.id,name:a.name,category:a.category||"uncategorized",completedAt:a.completedAt||0,duration:a.duration||0,wasRoutine:!1}));this.patternDetector.detectPatterns(b);let c=this.patternDetector.getPatterns(),d=this.productivityAnalyzer.calculateProductivityScore(a),e=this.insightGenerator.generateInsights(b,c,d),f=this.suggestionEngine.generateSuggestions(e,d,c);return{patterns:c,productivity:d,insights:e,suggestions:f}}getPatterns(){return this.patternDetector.getPatterns()}clearData(){new ax(au).clear(),new ax(av).clear(),new ax(aw).clear()}};function aD({maxVisible:a=3,showProductivity:d=!0,showHabits:e=!0,showActions:f=!0,className:g="",onDismiss:h,onAction:i}){let[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),{tasks:t}=(0,u.useTask)();(0,c.useEffect)(()=>{let a=async()=>{q(!0);try{var a;let b,c=t.map(a=>({id:a.id,name:a.title,completedAt:a.completionHistory.includes(a.specificDate||new Date().toISOString().split("T")[0])?Date.now():void 0,createdAt:a.createdAt?new Date(a.createdAt).getTime():Date.now(),category:a.timeBlock,duration:void 0})),d=aC.analyze(c),e=d.insights.filter(a=>a.actionable).map(a=>({id:`insight-${a.id}`,type:"productivity_tip",title:a.title,description:a.description,priority:Math.round(10*a.confidence),actionData:{action:a.action},dismissed:!1,generatedAt:a.generatedAt,isNew:!0,category:"insight"})),f=d.suggestions.map(a=>{var b;return{...a,isNew:!0,category:(b=a.type,["habit_formation","routine_suggestion","streak_motivation"].includes(b)?"habit":["time_optimization","productivity_tip","goal_alignment"].includes(b)?"productivity":["break_reminder","context_switch"].includes(b)?"action":"insight")}}),g=(a=[...e,...f],b=new Set,a.filter(a=>{let c=a.title.toLowerCase();return!b.has(c)&&(b.add(c),!0)}));k(g),m(d.insights),o(d.productivity)}catch(a){console.error("Failed to load suggestions:",a)}finally{q(!1)}};a();let b=setInterval(a,3e5);return()=>clearInterval(b)},[t.length,t.map(a=>a.id).join(",")]);let v=(0,c.useMemo)(()=>j.filter(a=>(!!f||"action"!==a.category)&&(!!e||"habit"!==a.category)&&(!!d||"productivity"!==a.category&&"insight"!==a.category)),[j,f,e,d]),w=r?v:v.slice(0,a),x=(0,c.useCallback)(a=>{k(b=>b.filter(b=>b.id!==a)),h?.(a)},[h]),y=(0,c.useCallback)(a=>{if(k(b=>b.map(b=>b.id===a.id?{...b,isNew:!1}:b)),i)i(a);else switch(a.type){case"habit_formation":af.toast.info("Creating routine...");break;case"time_optimization":af.toast.info("Adjusting your schedule...");break;case"break_reminder":af.toast.success("Take a break! You've earned it.");break;case"streak_motivation":af.toast.success("Keep up the great work!");break;default:af.toast.info(a.title)}},[i]),z=(0,c.useCallback)(a=>{k(b=>b.map(b=>b.id===a?{...b,isNew:!1}:b))},[]);return p?(0,b.jsx)("div",{className:`smart-suggestions ${g}`,children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-3"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg"}),(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg"})]})]})}):0===v.length?null:(0,b.jsxs)("div",{className:`smart-suggestions ${g}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Smart Suggestions"]}),n&&(0,b.jsx)(aF,{score:n.overall})]}),(0,b.jsx)("div",{className:"space-y-2",children:w.map(a=>(0,b.jsx)(aE,{suggestion:a,onDismiss:x,onAction:y,onMarkRead:z},a.id))}),v.length>a&&(0,b.jsx)("button",{onClick:()=>s(!r),className:"w-full mt-3 py-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:r?`Show less (${v.length-a} hidden)`:`Show ${v.length-a} more suggestions`})]})}function aE({suggestion:a,onDismiss:d,onAction:e,onMarkRead:f}){let[g,h]=(0,c.useState)(!1),i={habit_formation:{icon:"ðŸ”„",color:"text-purple-600",bgColor:"bg-purple-50"},time_optimization:{icon:"â°",color:"text-blue-600",bgColor:"bg-blue-50"},break_reminder:{icon:"â˜•",color:"text-orange-600",bgColor:"bg-orange-50"},streak_motivation:{icon:"ðŸ”¥",color:"text-red-600",bgColor:"bg-red-50"},context_switch:{icon:"ðŸ”€",color:"text-indigo-600",bgColor:"bg-indigo-50"},routine_suggestion:{icon:"ðŸ“‹",color:"text-teal-600",bgColor:"bg-teal-50"},productivity_tip:{icon:"ðŸ’¡",color:"text-yellow-600",bgColor:"bg-yellow-50"},goal_alignment:{icon:"ðŸŽ¯",color:"text-green-600",bgColor:"bg-green-50"}}[a.type]||{icon:"âœ¨",color:"text-gray-600",bgColor:"bg-gray-50"};return(0,b.jsxs)("div",{className:`relative p-3 rounded-xl border transition-all duration-200 cursor-pointer ${a.isNew?"border-blue-200 bg-blue-50/50 hover:bg-blue-50":"border-gray-100 bg-white hover:border-gray-200"} ${g?"shadow-md transform -translate-y-0.5":"shadow-sm"}`,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>{f(a.id),e(a)},children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg ${i.bgColor} ${i.color} flex items-center justify-center text-sm`,children:i.icon}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700 truncate",children:a.title}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),d(a.id)},className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Dismiss",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("p",{className:"mt-0.5 text-xs text-gray-500 line-clamp-2",children:a.description}),a.isNew&&(0,b.jsx)("span",{className:"inline-flex items-center mt-2 px-1.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-600 rounded",children:"New"})]})]}),(0,b.jsx)("div",{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500 transition-opacity ${g?"opacity-100":"opacity-0"}`})]})}function aF({score:a}){let c=a>=80?{label:"Great",color:"text-green-600",bgColor:"bg-green-100"}:a>=60?{label:"Good",color:"text-blue-600",bgColor:"bg-blue-100"}:a>=40?{label:"Okay",color:"text-yellow-600",bgColor:"bg-yellow-100"}:{label:"Low",color:"text-orange-600",bgColor:"bg-orange-100"};return(0,b.jsxs)("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full ${c.bgColor}`,children:[(0,b.jsx)("span",{className:`text-xs font-medium ${c.color}`,children:c.label}),(0,b.jsxs)("span",{className:`text-xs font-bold ${c.color}`,children:[a,"%"]})]})}let aG=["Dawn","Morning","Noon","Afternoon","Evening","Night"];function aH(){let{user:a,isLoading:f}=(0,d.useAuth)(),{loading:g,totalTasksToday:h,isOnline:i}=(0,u.useTask)(),{pendingCount:j}=(0,ae.useSync)(),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(void 0),o=ac();if(f||g)return(0,b.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",role:"status","aria-label":"Loading your routines",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`h-12 w-12 animate-spin rounded-full border-4 border-purple-500 border-t-transparent ${o?"animate-none":""}`}),(0,b.jsx)("div",{className:"absolute inset-0 h-12 w-12 animate-pulse rounded-full bg-purple-500/20 blur-md"})]}),(0,b.jsxs)("div",{className:"mt-6 text-center space-y-1",children:[(0,b.jsx)("p",{className:"text-base font-semibold text-foreground",children:"Loading your routines"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Getting everything ready..."})]}),(0,b.jsx)(ab,{message:"Loading your routines, please wait",type:"polite",clearAfter:0})]});if(!a)return(0,b.jsx)(q,{});let p=()=>{n(void 0),l(!0)},s=a=>{n(a),l(!0)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aa,{}),(0,b.jsx)(ab,{message:"",clearAfter:0}),(0,b.jsxs)("div",{className:"min-h-screen bg-background text-foreground selection:bg-purple-500/30",children:[(0,b.jsx)(r.Header,{}),(0,b.jsx)("main",{id:"main-content",className:"mx-auto max-w-7xl px-4 py-8 md:px-8",tabIndex:-1,children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(D,{onAddTask:p}),(0,b.jsx)(I,{}),(0,b.jsx)(ad.GlassCard,{className:"my-4 p-4",children:(0,b.jsx)(an,{placeholder:"Ask AI to create tasks, set timers, or answer questions...",showAnalysis:!0,className:"w-full"})}),(0,b.jsx)(aD,{maxVisible:3,showProductivity:!0,showHabits:!0,showActions:!0,className:"mb-6"}),!g&&0===h&&i&&(0,b.jsxs)(ad.GlassCard,{className:"my-6 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",role:"status","aria-live":"polite",children:[(0,b.jsxs)("div",{className:"relative z-10 flex flex-col sm:flex-row items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-foreground",children:"Ready to conquer the day?"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Your schedule is clear. Start from scratch or use a proved template to hit the ground running."})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)(e.Button,{onClick:p,className:"bg-foreground text-background hover:opacity-90 font-bold rounded-xl h-12 px-6","aria-label":"Create your first routine task",children:[(0,b.jsx)(v.Plus,{className:"w-4 h-4 mr-2","aria-hidden":"true"})," Create Routine"]})})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 h-64 w-64 bg-purple-500/10 blur-[80px] rounded-full pointer-events-none","aria-hidden":"true"})]}),(0,b.jsx)("div",{className:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",role:"list","aria-label":"Time blocks with routine tasks",children:aG.map(a=>(0,b.jsx)(T,{block:a,timeRange:function(a){switch(a){case"Dawn":return"4:00 AM - 6:00 AM";case"Morning":return"6:00 AM - 12:00 PM";case"Noon":return"12:00 PM - 2:00 PM";case"Afternoon":return"2:00 PM - 5:00 PM";case"Evening":return"5:00 PM - 8:00 PM";case"Night":return"8:00 PM - 4:00 AM";default:return""}}(a),onEditTask:s,role:"listitem"},a))}),(0,b.jsx)(_,{})]})}),(0,b.jsx)(U.TaskModal,{isOpen:k,onClose:()=>l(!1),taskToEdit:m}),(0,b.jsx)("footer",{className:"py-12 text-center text-muted-foreground/20 text-[10px] font-bold uppercase tracking-[0.2em]",children:"Designed for Excellence â€¢ Powered by RT"})]})]})}a.s(["default",()=>aH],40777)}];

//# sourceMappingURL=_bac8be79._.js.map