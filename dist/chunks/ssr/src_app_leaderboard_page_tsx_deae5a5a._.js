module.exports=[16588,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(20238);let e=[{id:"first_step",name:"First Step",description:"Complete your first task",icon:"ðŸŒ±",condition:({totalCompleted:a})=>a>=1},{id:"getting_serious",name:"Getting Serious",description:"Complete 10 tasks total",icon:"ðŸš€",condition:({totalCompleted:a})=>a>=10},{id:"streak_master",name:"Streak Master",description:"Reach a 3-day streak on any task",icon:"ðŸ”¥",condition:({maxStreak:a})=>a>=3},{id:"week_warrior",name:"Week Warrior",description:"Reach a 7-day streak on any task",icon:"âš”ï¸",condition:({maxStreak:a})=>a>=7},{id:"routine_pro",name:"Routine Pro",description:"Have at least 5 active routines",icon:"ðŸ“…",condition:({tasksCount:a})=>a>=5},{id:"two_week_champion",name:"Two Week Champion",description:"Maintain a 14-day streak",icon:"ðŸ†",condition:({maxStreak:a})=>a>=14},{id:"monthly_master",name:"Monthly Master",description:"Reach a 30-day streak on any task",icon:"ðŸ‘‘",condition:({maxStreak:a})=>a>=30},{id:"century_club",name:"Century Club",description:"Complete 100 tasks total",icon:"ðŸ’¯",condition:({totalCompleted:a})=>a>=100},{id:"half_thousand",name:"High Achiever",description:"Complete 500 tasks total",icon:"ðŸŒŸ",condition:({totalCompleted:a})=>a>=500},{id:"routine_master",name:"Routine Master",description:"Have at least 10 active routines",icon:"ðŸŽ¯",condition:({tasksCount:a})=>a>=10}];var f=a.i(35058);let g=()=>{let{tasks:a,calculateStreak:c}=(0,f.useTask)(),d=a.length>0?Math.max(...a.map(a=>c(a))):0,g={totalCompleted:a.reduce((a,b)=>a+b.completionHistory.length,0),maxStreak:d,tasksCount:a.length};return(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:e.map(a=>{let c=a.condition(g);return(0,b.jsxs)("div",{className:`flex items-center gap-4 rounded-xl border p-4 transition-all ${c?"border-purple-500/50 bg-purple-500/10":"border-border bg-card opacity-50 grayscale"}`,children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-background text-2xl shadow-sm",children:a.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),!c&&(0,b.jsx)("span",{className:"mt-1 text-xs font-medium text-muted-foreground/50 uppercase tracking-wider",children:"Locked"})]})]},a.id)})})};var h=a.i(96438),i=a.i(83077),j=a.i(53250),k=a.i(16106);let l=({users:a,currentUserRank:c})=>(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:(0,h.cn)("group flex items-center gap-4 p-4 rounded-2xl border transition-all",a.isCurrentUser?"border-purple-500/30 bg-gradient-to-r from-purple-500/10 to-pink-500/10":"border-white/5 bg-white/[0.03] hover:bg-white/[0.05]"),children:[(a=>{switch(a){case 1:return(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 shadow-lg shadow-yellow-500/30",children:(0,b.jsx)(i.Trophy,{className:"h-5 w-5 text-white"})});case 2:return(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-gray-300 to-gray-400 shadow-lg shadow-gray-400/30",children:(0,b.jsx)(j.Medal,{className:"h-5 w-5 text-white"})});case 3:return(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-amber-600 to-amber-700 shadow-lg shadow-amber-600/30",children:(0,b.jsx)(j.Medal,{className:"h-5 w-5 text-white"})});default:return(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/10 text-lg font-bold text-muted-foreground",children:a})}})(a.rank),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-2xl shrink-0 overflow-hidden relative",children:a.avatar&&a.avatar.length>4?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"absolute inset-0 flex items-center justify-center select-none",children:a.name?.[0]?.toUpperCase()||"ðŸ‘¤"}),(0,b.jsx)("img",{src:a.avatar,alt:a.name,className:"relative h-full w-full object-cover",onError:a=>a.currentTarget.style.display="none"})]}):a.avatar||a.name?.[0]?.toUpperCase()||"ðŸ‘¤"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:(0,h.cn)("font-bold truncate",a.isCurrentUser?"text-purple-400":"text-white"),children:a.name}),a.isCurrentUser&&(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-purple-500/20 text-[10px] font-bold text-purple-400 uppercase tracking-wider",children:"You"})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground font-medium mb-1",children:["@",a.username]}),(0,b.jsx)("div",{className:"flex items-center gap-3 mt-0.5",children:(0,b.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,b.jsx)(k.Flame,{className:"h-3 w-3 text-orange-400"}),a.streak," day streak"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 shrink-0",children:[(0,b.jsxs)("div",{className:"hidden sm:block text-right",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Tasks"}),(0,b.jsx)("div",{className:"text-lg font-bold text-white",children:a.totalCompleted})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Rate"}),(0,b.jsxs)("div",{className:(0,h.cn)("text-lg font-bold",a.completionRate>=80?"text-green-400":a.completionRate>=60?"text-yellow-400":"text-red-400"),children:[a.completionRate,"%"]})]})]})]},a.rank))});var m=a.i(24669),n=a.i(50429),o=a.i(16201);let p=(0,a.i(70106).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var q=a.i(23292);let r=({rank:a,totalUsers:c})=>{let{tasks:d,getCompletionRate:e,calculateStreak:g}=(0,f.useTask)(),i=e(7),j=d.length>0?Math.max(...d.map(a=>g(a))):0,l=d.reduce((a,b)=>a+b.completionHistory.length,0),r=c>0?Math.round((c-a)/c*100):0,s=async()=>{let b={title:"My RT Ranking",text:`I'm ranked #${a} on Routine Tracker with a ${j}-day streak! ðŸš€`,url:window.location.origin};try{navigator.share?await navigator.share(b):(await navigator.clipboard.writeText(`${b.text} ${b.url}`),q.toast.success("Copied to clipboard!"))}catch(a){console.error(a)}};return(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-purple-500/30 bg-gradient-to-br from-purple-500/10 via-transparent to-pink-500/10 p-6",children:[(0,b.jsx)("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-purple-500/20 blur-3xl"}),(0,b.jsx)("div",{className:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-pink-500/20 blur-3xl"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mb-1",children:"Your Ranking"}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsxs)("span",{className:"text-5xl font-bold text-white",children:["#",a]}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["of ",c]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:s,className:"h-16 w-16 rounded-2xl bg-white/5 hover:bg-white/10 text-white transition-colors",children:(0,b.jsx)(p,{className:"h-6 w-6"})}),(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 shadow-lg shadow-purple-500/30",children:(0,b.jsx)(m.TrendingUp,{className:"h-8 w-8 text-white"})})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Top ",c>0?100-r:0,"% of users"]}),(0,b.jsxs)("span",{className:"text-sm font-bold text-purple-400",children:[r,"th percentile"]})]}),(0,b.jsx)("div",{className:"h-2 w-full rounded-full bg-white/10 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${r}%`}})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"p-3 rounded-2xl bg-white/5 text-center",children:[(0,b.jsx)(o.CheckCircle,{className:"h-5 w-5 mx-auto mb-1 text-green-400"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-white",children:[i,"%"]}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"7-Day Rate"})]}),(0,b.jsxs)("div",{className:"p-3 rounded-2xl bg-white/5 text-center",children:[(0,b.jsx)(k.Flame,{className:"h-5 w-5 mx-auto mb-1 text-orange-400"}),(0,b.jsx)("div",{className:"text-lg font-bold text-white",children:j}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Best Streak"})]}),(0,b.jsxs)("div",{className:"p-3 rounded-2xl bg-white/5 text-center",children:[(0,b.jsx)(n.Target,{className:"h-5 w-5 mx-auto mb-1 text-purple-400"}),(0,b.jsx)("div",{className:"text-lg font-bold text-white",children:l}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Completed"})]})]})]})]})};var s=a.i(93518);a.i(69387);var t=a.i(60574),u=a.i(20237),v=a.i(56025);function w(){let{user:a}=(0,v.useAuth)(),[e,f]=(0,c.useState)([]),[h,k]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{try{let b=(0,t.collection)(u.db,"users"),c=(0,t.query)(b,(0,t.orderBy)("score","desc"),(0,t.limit)(50)),d=await (0,t.getDocs)(c),e=[];d.forEach(b=>{let c=b.data();(c.isPublic??!0)&&e.push({name:c.displayName||"Anonymous",username:c.username||"User",avatar:c.photoURL,rank:0,isCurrentUser:a?.uid===b.id,streak:c.streak||0,completionRate:c.completionRate||0,totalCompleted:c.totalCompleted||0,score:c.score||0})}),e.sort((a,b)=>(b.score||0)-(a.score||0)),e.forEach((a,b)=>a.rank=b+1),f(e)}catch(a){console.error("Error fetching leaderboard:",a),a?.code==="permission-denied"&&console.error("Check your Firestore Security Rules. You might need to deploy them: firebase deploy --only firestore")}finally{k(!1)}})()},[a]);let m=e.find(a=>a.isCurrentUser),n=m?.rank||0;return(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[(0,b.jsx)(d.Header,{}),(0,b.jsxs)("main",{className:"container mx-auto max-w-4xl px-4 pt-6",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-500/10 rounded-2xl",children:(0,b.jsx)(i.Trophy,{className:"h-8 w-8 text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-foreground mb-1",children:"Leaderboard"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Compete with other productivity enthusiasts"})]})]})}),a&&(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)(r,{rank:n||0,totalUsers:e.length||0})}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(j.Medal,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)("h3",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest",children:"Top Performers"})]}),h?(0,b.jsx)("div",{className:"text-center py-10 text-muted-foreground animate-pulse",children:"Loading rankings..."}):(0,b.jsx)(l,{users:e,currentUserRank:n})]}),(0,b.jsxs)("div",{className:"mt-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(s.Award,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)("h3",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest",children:"Achievements"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Unlock badges by staying consistent with your routines."}),(0,b.jsx)(g,{})]})]})]})}a.s(["default",()=>w],16588)}];

//# sourceMappingURL=src_app_leaderboard_page_tsx_deae5a5a._.js.map